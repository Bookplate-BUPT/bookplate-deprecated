<!--pages/history/history.wxml-->

<view wx:if="{{!userOpenid}}">
  <van-popup show="{{ showNoLoginPopup }}" bind:close="closeNoLoginPopup" round position="bottom" custom-style="height: 35%">
    <view style="justify-content: center; display: flex; margin: 12% 0 8% 0;">认证用户信息后方可正常使用</view>
    <van-button round type="primary" color="linear-gradient(to right, #b3cfb0, #659c64)" custom-style="justify-content: center; display: flex; width: 80%" bind:click="userLogin">
      点此认证用户信息
    </van-button>
  </van-popup>
</view>

<van-tabs>
  <van-tab title="卖书">
    <view wx:for="{{ nowHistoryList }}" style="margin-top: 8px;" wx:key="_id">
      <van-cell-group inset custom-class="shadow">
        <van-card price="{{ item.bookDetail.price }}" desc="{{ item.bookDetail.description }}" thumb="{{ item.bookDetail.image_list[0] }}" origin-price="{{ item.bookDetail.original_price }}" custom-class="goodsCardMargin">
          <view slot="title" >
            <view style="color: #cccccc;">{{ item.view_time }}</view>
            <view style="font-weight: bold;">{{ item.bookDetail.name }}</view>
            <van-tag type="warning" plain color="{{ item.bookDetail.grade === '本科生' ? '#a0d911' : '#13c2c2' }}" style="margin-left: 4px;">{{ item.bookDetail.grade }}</van-tag>
          </view>
          <view slot="num" style="display: flex; justify-content: space-between;">
            <van-button size="mini" round color="#f6a7af" bind:click="deleteHistory" data-id="{{ item._id }}">删除
            </van-button>
            <van-button size="mini" round color="#b0c2db" bind:click="goToBookDetail" data-id="{{ item.bookDetail._id }}">查看
            </van-button>
          </view>
        </van-card>
      </van-cell-group>
    </view>
  </van-tab>

  <van-tab title="求书">
    <view style="display: flex; justify-content: center; margin-top: 200px;">暂未开发</view>
  </van-tab>

</van-tabs>
<view style="margin-bottom: 5%;" />
