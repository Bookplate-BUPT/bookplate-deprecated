<wxs src="../../utils/utils.wxs" module="utils" />

<block wx:if="{{!goodsList.length}}">
  <van-empty description="没有卖书记录" style="margin-top: 160rpx;"></van-empty>
</block>
<block wx:else>
  <view wx:for="{{goodsList}}" wx:key="_id">
    <view wx:if="{{postDate[index-1]===postDate[index]?false:true}}">
      <view class="time">{{ postDate[index]===today?'今天':utils.getDateOnly(postDate[index],today) }}</view>
    </view>
    <view style="margin-top: 20rpx;">
      <van-cell-group inset custom-class="shadow">
        <van-swipe-cell right-width="{{ 60 }}">
          <van-card price="{{ item.price }}" thumb="{{ item.image_list[0] }}" origin-price="{{ item.original_price }}" data-index="{{ index }}" bindtap="goToUpDateMyBookDetail">
            <view slot="title" class="bookName">
              {{ item.name }}
            </view>
            <view slot="desc" class="bookIntroduction">
              {{ item.introduction }}
            </view>
          </van-card>
          <van-button block color="#878998" slot="right" custom-class="swiperCellButton" bind:click="deleteMyGoods" data-_id="{{item._id}}" data-index="{{index}}">删除</van-button>
        </van-swipe-cell>
      </van-cell-group>
    </view>
  </view>

  <van-divider wx:if="{{ goodsList.length && goodsList.length == goodsSum }}" contentPosition="center" dashed>没有更多啦</van-divider>
</block>