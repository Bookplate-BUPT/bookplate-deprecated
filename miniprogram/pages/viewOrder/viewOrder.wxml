<wxs src="../../utils/utils.wxs" module="utils" />

<van-tabs active="{{ active }}" color="#8AC286" sticky animated swipeable id="tabs" bind:change="changeActive">
  <van-tab title="全部">
    <view wx:if="{{ !tradeGoodsList.length }}" style="margin-top: 180rpx;">
      <van-empty description="没有任何交易哦~"></van-empty>
    </view>
    <view wx:else>
      <view wx:for="{{tradeGoodsList}}" wx:key="_id" style="margin-top: 20rpx;">
        <OrderCard state="{{ item.state }}" trade_price="{{ item.trade_price }}" trade_time="{{ item.trade_time }}" trade_spot="{{ item.trade_spot }}" bookDetail="{{ item.bookDetail }}" _id="{{ item._id }}" ></OrderCard>
      </view>

      <van-divider wx:if="{{ tradeGoodsList.length == tradeGoodsListSum }}" contentPosition="center" dashed>没有更多了~</van-divider>
    </view>
  </van-tab>

  <van-tab title="待处理">
    <view wx:if="{{ !pendingTrade.length }}" style="margin-top: 180rpx;">
      <van-empty description="没有待处理的交易哦~"></van-empty>
    </view>
    <view wx:else>
      <view wx:for="{{pendingTrade}}" wx:key="_id" style="margin-top: 20rpx;">
        <OrderCard state="{{ item.state }}" right="{{ 88 }}" trade_price="{{ item.trade_price }}" trade_time="{{ item.trade_time }}" trade_spot="{{ item.trade_spot }}" bookDetail="{{ item.bookDetail }}" _id="{{ item._id }}" >
          <van-button slot="right" color="#FF596A" custom-class="swiperCellButton" bind:click="rejectForm" data-_id="{{item._id}}" data-goodsid="{{item.goods_id}}">
            取消交易
          </van-button>
        </OrderCard>
      </view>

      <van-divider wx:if="{{ pendingTrade.length == pendingTradeSum }}" contentPosition="center" dashed>没有更多了~</van-divider>
    </view>
  </van-tab>

  <van-tab title="已取消">
    <view wx:if="{{ !rejectedTrade.length }}" style="margin-top: 180rpx;">
      <van-empty description="没有已取消的交易哦~"></van-empty>
    </view>
    <view wx:else>
      <view wx:for="{{rejectedTrade}}" wx:key="_id" style="margin-top: 20rpx;">
        <OrderCard state="{{ item.state }}" trade_price="{{ item.trade_price }}" trade_time="{{ item.trade_time }}" trade_spot="{{ item.trade_spot }}" bookDetail="{{ item.bookDetail }}" _id="{{ item._id }}" ></OrderCard>
      </view>

      <van-divider wx:if="{{ rejectedTrade.length == rejectedTradeSum }}" contentPosition="center" dashed>没有更多了~</van-divider>
    </view>
  </van-tab>

  <van-tab title="待收货" dot="{{unreceived}}">
    <view wx:if="{{ !confirmedTrade.length }}" style="margin-top: 180rpx;">
      <van-empty description="没有待收货的交易哦~"></van-empty>
    </view>
    <view wx:else>
      <view wx:for="{{confirmedTrade}}" wx:key="_id" style="margin-top: 20rpx;">
        <OrderCard state="{{ item.state }}" right="{{ 88 }}" trade_price="{{ item.trade_price }}" trade_time="{{ item.trade_time }}" trade_spot="{{ item.trade_spot }}" bookDetail="{{ item.bookDetail }}" _id="{{ item._id }}" >
          <van-button slot='right' color="#8AC286" custom-class="swiperCellButton" bind:click="confirmReceipt" data-_id="{{item._id}}" data-goodsid="{{item.goods_id}}">收货</van-button>
        </OrderCard>
      </view>

      <van-divider wx:if="{{ confirmedTrade.length == confirmedTradeSum }}" contentPosition="center" dashed>没有更多了~</van-divider>
    </view>
  </van-tab>

  <van-tab title="已成交">
    <view wx:if="{{ !successfulTrade.length }}" style="margin-top: 180rpx;">
      <van-empty description="没有已成交的书籍哦~"></van-empty>
    </view>
    <view wx:else>
      <view wx:for="{{successfulTrade}}" wx:key="_id" style="margin-top: 20rpx;">
        <OrderCard state="{{ item.state }}" trade_price="{{ item.trade_price }}" trade_time="{{ item.trade_time }}" trade_spot="{{ item.trade_spot }}" bookDetail="{{ item.bookDetail }}" _id="{{ item._id }}" ></OrderCard>
      </view>

      <van-divider wx:if="{{ successfulTrade.length == successfulTradeSum }}" contentPosition="center" dashed>没有更多了~</van-divider>
    </view>
  </van-tab>
</van-tabs>